fragment post on Post {
  id
  title
  body
  author {
    email
  }
}

fragment userWithPosts on User {
  email
  posts {
    id
    title
    body
  }
}

query allPosts {
  posts {
    ...post
  }
}

query userWithPosts($userId: ID!) {
  user(id: $userId) {
    ...userWithPosts
  }
}

mutation createPost($post: CreatePostInput!) {
  createPost(input: $post) {
    success
    message
    post {
      ...post
    }
  }
}

#------------------------------------------------------------------------------
# auth
#------------------------------------------------------------------------------
fragment currentUser on User {
  id
  email
}

query whoAmI {
  whoAmI {
    ...currentUser
  }
}

mutation login($email: String!, $password: String!) {
  login(input: { email: $email, password: $password}) {
    success
    message
    user {
      ...currentUser
    }
    token
  }
}

mutation logout {
  logout {
    success
  }
}

mutation createUser($email: String!, $password: String!) {
  createUser(input: { email: $email, password: $password}) {
    success
    message
    user {
      id
    }
  }
}

# #------------------------------------------------------------------------------
# # Todos
# #------------------------------------------------------------------------------

# fragment AllTodoFields on Todo {
#     __typename
#     nodeId
#     id
#     title
#     description
#     isComplete
# }

# query allTodos($condition: TodoCondition) {
#     allTodos(condition: $condition) {
#         nodes {
#             ...AllTodoFields
#         }
#     }
# }

# query todoById($id: Int!) {
#     todoById(id: $id) {
#         ...AllTodoFields
#     }
# }

# mutation createTodo($todo: TodoInput!) {
#     createTodo(input: { todo: $todo }) {
#         todo {
#             ...AllTodoFields
#         }
#     }
# }

# mutation updateTodoById($input: UpdateTodoByIdInput!) {
#     updateTodoById(input: $input) {
#         todo {
#             ...AllTodoFields
#         }
#     }
# }

# #------------------------------------------------------------------------------
# # Local State
# #------------------------------------------------------------------------------

# query isAuthenticated {
#     isAuthenticated @client
# }

# mutation updateAuth($newState: Boolean!) {
#     updateAuth(newState: $newState) @client {
#         isAuthed
#     }
# }
